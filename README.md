# 光之共鳴 Prism Resonance

---

## 創作構想說明

**作品類型與形式：**  
互動光影裝置、動態投影藝術

**創作核心概念：**  
本作品以動態彩繪玻璃背景為基礎，結合觀眾自由擺放的光學稜鏡與短焦投影機，將動態畫面投影於平面。觀眾可自由移動、旋轉各種光學稜鏡，讓投影畫面經過折射後產生獨特且多變的視覺效果。每位觀眾都能參與光影的再創造，透過個人化的操作，創造出屬於自己的光影變化。作品強調「共創」、「折射」、「個人化體驗」與「即時互動」的主題，觀眾不僅是欣賞者，更是這個作品的共同創作者，與作品產生深度且即時的互動。

**作品互動方式：**  
觀眾可自由移動、旋轉光學稜鏡，改變投影畫面的折射與分布，並可透過感測器或滑鼠參與動態變化，創造獨特的視覺效果。

**發光設計與材料運用：**  
以短焦投影機投影動態彩繪玻璃圖樣於平面，搭配各式光學稜鏡（如三棱鏡、合光稜鏡等）進行折射。視覺上追求色彩流動、光影交錯、玻璃質感與萬花筒般的奇幻氛圍，營造夢幻且可共創的感受。

**AI 在創作中的角色：**  
AI 參與構想生成、互動程式設計、視覺參數優化、命名建議與批判性回饋，協助提升作品的互動性與美感。

**預計使用技術與工具：**  
- Arduino UNO
- HC-SR04 超音波感測器
- Web Serial API
- HTML5 Canvas + d3-delaunay
- 光學稜鏡、短焦投影機

---

## 作品理念

本作品利用短焦投影機將動態彩繪玻璃背景投影於平面，觀眾可自由擺放各種光學稜鏡，讓投影畫面經過折射後產生獨特的視覺效果。每位觀眾都能透過移動、旋轉稜鏡，創造出屬於自己的光影變化。觀眾不僅是欣賞者，更是這個作品的共同創作者，與作品產生即時且個人化的互動。

---

## stained-glass.html 說明

此網頁會顯示動態的「彩繪玻璃」背景，並可根據滑鼠或 Arduino 感測距離互動。右上角有多種設定：

- **主題**  
  選擇不同色彩主題，影響每個玻璃區塊的色調。  
  - 彩虹：多彩色調
  - 暖色、冷色：偏紅/藍色系
  - 單色藍/綠/紅/黃/紫：單一色系

- **萬花筒**  
  勾選後，畫面呈現萬花筒對稱效果。

- **分割**  
  萬花筒分割數，數字越大對稱區塊越多。

- **X軸高亮**  
  勾選後，滑鼠或感測器控制的 X 軸位置會讓該垂直區域的玻璃變亮。

- **捲軸效果**  
  可調整背景橫向流動速度，營造動態流動感。

- **Viewport**  
  可設定僅顯示畫面中的某個矩形區域，方便局部投影或特殊展示。

- **選擇連接埠**  
  點擊後可選擇 Arduino 連接埠，連接後可由 Arduino 控制互動（如以距離感測器取代滑鼠 X）。

### 感測互動

- 預設以滑鼠 X/Y 控制玻璃亮度。
- 若連接 Arduino，則以 HC-SR04 感測距離正規化為 0~1，對應畫面 X 軸，控制高亮區域。

## Arduino UNO + HC-SR04 接線

- **HC-SR04 VCC** → Arduino 5V
- **HC-SR04 GND** → Arduino GND
- **HC-SR04 TRIG** → Arduino D9
- **HC-SR04 ECHO** → Arduino D10

> 注意：ECHO 腳位輸出 5V，若接 ESP32/ESP8266 請加分壓保護。

## Arduino 程式

請參考 `distance_to_html.ino`，其功能如下：

- 讀取 HC-SR04 距離，正規化為 0~1。
- 透過序列埠每 50ms 輸出 `mouseX:0.53` 格式。
- 可用序列指令 `max:數值`、`min:數值` 設定感測距離範圍（單位：cm）。

## 使用方式

1. 將 `distance_to_html.ino` 上傳至 Arduino UNO。
2. 以 USB 連接電腦，開啟 stained-glass.html（需支援 Web Serial 的瀏覽器，如 Chrome）。
3. 點選「選擇連接埠」並選擇 Arduino。
4. 移動手於感測器前方，網頁會根據距離變化高亮區域。
5. 利用短焦投影機將畫面投影到平面，觀眾可自由擺放光學稜鏡，創造屬於自己的光影藝術。

---

## 歷史提問紀錄與回答摘要

1. **使用html及canvas做出彩繪玻璃動態背景的特效**  
   → 利用 canvas 與 Voronoi 分割產生動態彩繪玻璃效果。

2. **每塊玻璃加入hue慢慢改變的特效**  
   → 每個 cell 設定 hue 並隨時間自動變化。

3. **那個位置可以調整hue的改變速度?**  
   → 可在每個 cell 的 speed 屬性調整 hue 變化速度。

4. **有什麼設定可以讓這個動態背景效果更好?**  
   → 可調整 cell 數量、色彩主題、邊界、動畫速度等參數。

5. **加入可以設定不同顏色主題的選項**  
   → 新增主題選單，切換不同色彩主題。

6. **加入單一色調的選項**  
   → 增加單色主題（藍、綠、紅、黃、紫）選項。

7. **單一色調可以從改變hue變為改變光暗度嗎?**  
   → 單色主題下可改為調整亮度而非色相。

8. **彩繪玻璃之間加入線條分隔開**  
   → 為每個 cell 畫黑色描邊。

9. **加入滑鼠的互動元素，鼠標位置會影響對應玻璃的光亮度**  
   → 滑鼠靠近 cell 時提升亮度，產生互動感。

10. **幫我做出萬花筒效果 可以設定**  
    → 加入萬花筒主題與分割數設定，旋轉/鏡像複製扇形區域。

11. **不能直接複製一個區域變成萬花筒嗎?**  
    → 用 offscreen canvas 畫扇形，再多次旋轉複製到主畫布。

12. **可以把色彩跟萬花筒設定分開嗎**  
    → 色彩主題與萬花筒分割獨立，萬花筒用 checkbox 控制。

13. **每個區域中間的白色部分是?**  
    → 是描邊與陰影造成的亮暈，非真正白色。

14. **if (s % 2 === 1) ctx.scale(1, -1); // 鏡像 這句會令那部分變白色**  
    → 鏡像後超出扇形區域會變透明，建議移除鏡像。

15. **有辦法令原來彩繪玻璃區域大於畫面嗎**  
    → 隨機點產生範圍擴大到畫布外，讓 cell 延伸超出畫面。

16. **能不能把萬花筒效果套用到各個顏色之中**  
    → 萬花筒效果色彩也用主題色調函式。

17. **給一個選項是只偵測mouse x去把一整排的玻璃變亮**  
    → 新增 X 軸高亮選項，僅比較 cell.x 與 mouse.x。

18. **主題跟themeSel同一行 萬花筒跟分割同一行**  
    → 設定區塊用 flex 排版，主題與分割分行顯示。

19. **把html跟arduino連接，需要選擇port再作連接**  
    → 加入 Web Serial API，提供選擇連接埠按鈕。

20. **我不需要把資訊傳到arduino，反而需要從arduino傳送input給html**  
    → 只讀取 Arduino 資料，根據序列資料控制網頁互動。

21. **主要是代替mouse x那個部分 其他不用**  
    → 只處理 mouseX:0.53 這類資料，直接取代 mouse.x。

22. **給我一個log去做測試**  
    → Arduino 輸出 distance 與 norm 的 log 供測試。

23. **在README.md檔案中加入這個專案的描述，中間要解釋stained-glass的各設定及影響，還有講解arduino的接線部分**  
    → 詳細說明專案理念、網頁設定、感測互動與 Arduino 接線。

24. **增加一個field minDistance**  
    → 增加 minDistance 參數，正規化時考慮最小距離。

25. **把0~1的norm傳到stained-glass.html那邊**  
    → Arduino 輸出 mouseX:0.53 格式，供網頁讀取。

26. **增加效果 令玻璃效果好一點**  
    → 疊加高光、雜訊紋理等，提升玻璃質感。

27. **我的萬花筒功能出問題了 log cx cy**  
    → 在萬花筒函式中 log 中心座標 cx, cy 供 debug。

28. **能不能做出一個捲軸效果**  
    → 每幀平移所有點的 x 座標，產生橫向捲動效果。

29. **加入設定裡**  
    → 捲軸速度加入設定面板，可即時調整。

30. **加入一個viewport設定 可以設定x y widh height, 這個rect以內才可以看到canvas**  
    → 新增 viewport 設定，僅顯示指定矩形區域。

31. **background是黑色**  
    → body, html 設定 background: #000。

32. **右上方加入一個可以開關設定menu的按鈕**  
    → 新增設定面板開關按鈕，點擊可顯示/隱藏設定。

33. **捲軸數值固定為0.00格式**  
    → 捲軸速度顯示固定兩位小數。

---

## 作品展示影片

[https://youtube.com/shorts/22oGqdboLAY](https://youtube.com/shorts/22oGqdboLAY)

---